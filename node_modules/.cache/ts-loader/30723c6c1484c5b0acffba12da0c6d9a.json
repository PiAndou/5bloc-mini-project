{"remainingRequest":"D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\node_modules\\babel-loader\\lib\\index.js!D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\src\\views\\Deploy.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\src\\views\\Deploy.vue","mtime":1644155992790},{"path":"D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\babel.config.js","mtime":1642883980647},{"path":"D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1644154681877},{"path":"D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\node_modules\\babel-loader\\lib\\index.js","mtime":1644154681784},{"path":"D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\node_modules\\ts-loader\\index.js","mtime":1644154698120},{"path":"D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1644154681877},{"path":"D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\node_modules\\vue-loader\\lib\\index.js","mtime":1644154704041}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxDT1VSU1xcU1VQSU5GT1xcTVNDLTJcXDVCTE9DXFw1YmxvYy1taW5pLXByb2plY3RcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6XFxDT1VSU1xcU1VQSU5GT1xcTVNDLTJcXDVCTE9DXFw1YmxvYy1taW5pLXByb2plY3RcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOlxcQ09VUlNcXFNVUElORk9cXE1TQy0yXFw1QkxPQ1xcNWJsb2MtbWluaS1wcm9qZWN0XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiRDpcXENPVVJTXFxTVVBJTkZPXFxNU0MtMlxcNUJMT0NcXDVibG9jLW1pbmktcHJvamVjdFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIkQ6XFxDT1VSU1xcU1VQSU5GT1xcTVNDLTJcXDVCTE9DXFw1YmxvYy1taW5pLXByb2plY3RcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXRoLnRydW5jLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCBFbGVjdGlvbkNvbnRyYWN0IGZyb20gIkAvLi4vYnVpbGQvY29udHJhY3RzL0VsZWN0aW9uQ29udHJhY3QuanNvbiI7CmltcG9ydCBXZWIzIGZyb20gIndlYjMiOwoKdmFyIERlcGxveSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSkgewogIF9pbmhlcml0cyhEZXBsb3ksIF9WdWUpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKERlcGxveSk7CgogIGZ1bmN0aW9uIERlcGxveSgpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGVwbG95KTsKCiAgICBfdGhpcyA9IF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgX3RoaXMud2ViM0luc3RhbmNlID0gbnVsbDsKICAgIF90aGlzLmN1cnJlbnRBZGRyZXNzID0gbnVsbDsKICAgIF90aGlzLmVsZWN0aW9uQ29udHJhY3QgPSBudWxsOwogICAgX3RoaXMuZGVwbG95ZWRFbGVjdGlvbkNvbnRyYWN0ID0gbnVsbDsKICAgIF90aGlzLmNhbmRpZGF0ZXMgPSBbXTsKICAgIF90aGlzLnZvdGVycyA9IFtdOwogICAgX3RoaXMuY2FuZGlkYXRlQWRkciA9ICIiOwogICAgX3RoaXMudm90ZXJBZGRyID0gIiI7CiAgICBfdGhpcy5zdHViQWNjb3VudHMgPSBbXTsKICAgIF90aGlzLmZvcm0gPSB7CiAgICAgIHN0YXJ0RGF0ZTogbnVsbCwKICAgICAgZW5kRGF0ZTogbnVsbAogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhEZXBsb3ksIFt7CiAgICBrZXk6ICJtb3VudGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfbW91bnRlZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgd2ViM1Byb3ZpZGVyLCBmZXRjaGVkQWNjb3VudHM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgd2ViM1Byb3ZpZGVyID0gbmV3IFdlYjMucHJvdmlkZXJzLkh0dHBQcm92aWRlciggLy8id3M6Ly8xNzIuMjUuMC4xMDI6NzU0NSIKICAgICAgICAgICAgICAgICJodHRwOi8vMTkyLjE2OC4xMi4xNDY6ODU0NSIpOwoKICAgICAgICAgICAgICAgIGlmICghKHR5cGVvZiB3aW5kb3cuZXRoZXJldW0gIT09ICJ1bmRlZmluZWQiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNZXRhTWFzayBpcyBpbnN0YWxsZWQhIik7IC8vICh3aW5kb3cgYXMgYW55KS5ldGhlcmV1bS5yZXF1ZXN0KHsgbWV0aG9kOiAnZXRoX3JlcXVlc3RBY2NvdW50cycgfSk7CiAgICAgICAgICAgICAgICAvLyB0aGlzLndlYjNJbnN0YW5jZSA9IG5ldyBXZWIzKCh3aW5kb3cgYXMgYW55KS5ldGhlcmV1bSk7CgogICAgICAgICAgICAgICAgdGhpcy53ZWIzSW5zdGFuY2UgPSBuZXcgV2ViMyh3ZWIzUHJvdmlkZXIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIndlYjNJbnN0YW5jZSIsIHRoaXMud2ViM0luc3RhbmNlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2ViM0luc3RhbmNlLmV0aC5nZXRBY2NvdW50cygpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBmZXRjaGVkQWNjb3VudHMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImZldGNoZWRBY2NvdW50cyIsIGZldGNoZWRBY2NvdW50cyk7CiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRBZGRyZXNzID0gZmV0Y2hlZEFjY291bnRzWzBdOwogICAgICAgICAgICAgICAgdGhpcy5lbGVjdGlvbkNvbnRyYWN0ID0gbmV3IHRoaXMud2ViM0luc3RhbmNlLmV0aC5Db250cmFjdChFbGVjdGlvbkNvbnRyYWN0LmFiaSAvLyBFbGVjdGlvbkNvbnRyYWN0Lm5ldHdvcmtzWyc1Nzc3J10uYWRkcmVzcwogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlbGVjdGlvbkNvbnRyYWN0IiwgdGhpcy5lbGVjdGlvbkNvbnRyYWN0KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIk1ldGFNYXNrIGlzIG5vdCBpbnN0YWxsZWQiKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgICAgIHJldHVybiBfbW91bnRlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gbW91bnRlZDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImJlZm9yZURlc3Ryb3kiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICAgIGlmICh0aGlzLndlYjNJbnN0YW5jZSkgewogICAgICAgIHRoaXMud2ViM0luc3RhbmNlID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZWxlY3Rpb25Db250cmFjdCkgewogICAgICAgIHRoaXMuZWxlY3Rpb25Db250cmFjdCA9IG51bGw7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZW5lcmF0ZVN0dWJBY2NvdW50cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dlbmVyYXRlU3R1YkFjY291bnRzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX2ksIF9BcnJheSwgaSwgcGFzc3dvcmQsIGFkZHJlc3M7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfaSA9IDAsIF9BcnJheSA9IG5ldyBBcnJheSg2KTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBfQXJyYXkubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpID0gX0FycmF5W19pXTsKICAgICAgICAgICAgICAgIHBhc3N3b3JkID0gKE1hdGgucmFuZG9tKCkgKyAxKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2ViM0luc3RhbmNlLmV0aC5wZXJzb25hbC5uZXdBY2NvdW50KHBhc3N3b3JkKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgYWRkcmVzcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgdGhpcy51bmxvY2tBY2NvdW50KGFkZHJlc3MsIHBhc3N3b3JkKTsKICAgICAgICAgICAgICAgIHRoaXMuc3R1YkFjY291bnRzLnB1c2goewogICAgICAgICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfaSsrOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygic3R1YkFjY291bnRzIiwgdGhpcy5zdHViQWNjb3VudHMpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVTdHViQWNjb3VudHMoKSB7CiAgICAgICAgcmV0dXJuIF9nZW5lcmF0ZVN0dWJBY2NvdW50cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2VuZXJhdGVTdHViQWNjb3VudHM7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJ1bmxvY2tBY2NvdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdW5sb2NrQWNjb3VudCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoYWRkcmVzcywgcGFzc3dvcmQpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gdW5sb2NrIGZvciBhIGxvbmcgdGltZQogICAgICAgICAgICAgICAgdGhpcy53ZWIzSW5zdGFuY2UuZXRoLnBlcnNvbmFsLnVubG9ja0FjY291bnQoYWRkcmVzcywgcGFzc3dvcmQsIDE1MDAwKTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdW5sb2NrQWNjb3VudChfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF91bmxvY2tBY2NvdW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1bmxvY2tBY2NvdW50OwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZGVwbG95IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZGVwbG95ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgY29udHJhY3RCeXRlQ29kZSwgY2FuZGlkYXRlcywgdm90ZXJzLCBzdGFydERhdGUsIGVuZERhdGU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8vIGNvbnN0IGNvbnRyYWN0Qnl0ZUNvZGUgPSBhd2FpdCB0aGlzLndlYjNJbnN0YW5jZSEuZXRoLmdldENvZGUoCiAgICAgICAgICAgICAgICAvLyAgIEVsZWN0aW9uQ29udHJhY3QubmV0d29ya3NbJzU3NzcnXS5hZGRyZXNzCiAgICAgICAgICAgICAgICAvLyApOwogICAgICAgICAgICAgICAgY29udHJhY3RCeXRlQ29kZSA9IEVsZWN0aW9uQ29udHJhY3QuYnl0ZWNvZGU7IC8vIGNvbnN0IGNhbmRpZGF0ZXM6IHN0cmluZ1tdID0gdGhpcy5zdHViQWNjb3VudHMKICAgICAgICAgICAgICAgIC8vICAgLmZpbHRlcigoYWNjb3VudDogYW55KSA9PiAhYWNjb3VudC5hZGRyZXNzICE9PSB0aGlzLmN1cnJlbnRBZGRyZXNzKQogICAgICAgICAgICAgICAgLy8gICAvLyAuc2xpY2UoMCwgMTApCiAgICAgICAgICAgICAgICAvLyAgIC5tYXAoKGFjY291bnQ6IGFueSkgPT4gYWNjb3VudC5hZGRyZXNzKTsKICAgICAgICAgICAgICAgIC8vIGNvbnN0IHZvdGVyczogc3RyaW5nW10gPSB0aGlzLnN0dWJBY2NvdW50cwogICAgICAgICAgICAgICAgLy8gICAuZmlsdGVyKChhY2NvdW50OiBhbnkpID0+ICFhY2NvdW50LmFkZHJlc3MgIT09IHRoaXMuY3VycmVudEFkZHJlc3MpCiAgICAgICAgICAgICAgICAvLyAgIC5tYXAoKGFjY291bnQ6IGFueSkgPT4gYWNjb3VudC5hZGRyZXNzKQogICAgICAgICAgICAgICAgLy8gICAuZmlsdGVyKChhZGRyOiBzdHJpbmcpID0+ICFjYW5kaWRhdGVzLmluY2x1ZGVzKGFkZHIpKTsKCiAgICAgICAgICAgICAgICBjYW5kaWRhdGVzID0gdGhpcy5jYW5kaWRhdGVzOwogICAgICAgICAgICAgICAgdm90ZXJzID0gdGhpcy52b3RlcnM7CiAgICAgICAgICAgICAgICBzdGFydERhdGUgPSBNYXRoLnRydW5jKHRoaXMuZm9ybS5zdGFydERhdGUuZ2V0VGltZSgpIC8gMTAwMCk7CiAgICAgICAgICAgICAgICBlbmREYXRlID0gTWF0aC50cnVuYyh0aGlzLmZvcm0uZW5kRGF0ZS5nZXRUaW1lKCkgLyAxMDAwKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJzdGFydERhdGUiLCBzdGFydERhdGUpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImVuZERhdGUiLCBlbmREYXRlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZWN0aW9uQ29udHJhY3QuZGVwbG95KHsKICAgICAgICAgICAgICAgICAgZGF0YTogY29udHJhY3RCeXRlQ29kZSwKICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBbY2FuZGlkYXRlcywgdm90ZXJzLCBzdGFydERhdGUsIGVuZERhdGVdCiAgICAgICAgICAgICAgICB9KS5zZW5kKHsKICAgICAgICAgICAgICAgICAgZnJvbTogdGhpcy5jdXJyZW50QWRkcmVzcywKICAgICAgICAgICAgICAgICAgZ2FzOiAyMTIwNTQxLAogICAgICAgICAgICAgICAgICBnYXNQcmljZTogIjIwMDAwMDAwMDAiCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgdGhpcy5kZXBsb3llZEVsZWN0aW9uQ29udHJhY3QgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJkZXBsb3llZEVsZWN0aW9uQ29udHJhY3QiLCB0aGlzLmRlcGxveWVkRWxlY3Rpb25Db250cmFjdCk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBkZXBsb3koKSB7CiAgICAgICAgcmV0dXJuIF9kZXBsb3kuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGRlcGxveTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImFkZENhbmRpZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ2FuZGlkYXRlKCkgewogICAgICBpZiAodGhpcy5jYW5kaWRhdGVBZGRyLnRyaW0oKSkgewogICAgICAgIHRoaXMuY2FuZGlkYXRlcy5wdXNoKHRoaXMuY2FuZGlkYXRlQWRkci50cmltKCkpOwogICAgICAgIHRoaXMuY2FuZGlkYXRlQWRkciA9ICIiOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkVm90ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFZvdGVyKCkgewogICAgICBpZiAodGhpcy52b3RlckFkZHIudHJpbSgpKSB7CiAgICAgICAgdGhpcy52b3RlcnMucHVzaCh0aGlzLnZvdGVyQWRkci50cmltKCkpOwogICAgICAgIHRoaXMudm90ZXJBZGRyID0gIiI7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBEZXBsb3k7Cn0oVnVlKTsKCkRlcGxveSA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogey8vIEhlbGxvV29ybGQsCiAgfQp9KV0sIERlcGxveSk7CmV4cG9ydCBkZWZhdWx0IERlcGxveTs="},{"version":3,"sources":["D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\COURS\\SUPINFO\\MSC-2\\5BLOC\\5bloc-mini-project\\src\\views\\Deploy.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport ElectionContract from \"@/../build/contracts/ElectionContract.json\";\nimport Web3 from \"web3\";\n\n@Component({\n  components: {\n    // HelloWorld,\n  },\n})\nexport default class Deploy extends Vue {\n  web3Instance: Web3 | null = null;\n  currentAddress: string | null = null;\n  electionContract: any = null;\n  deployedElectionContract: any = null;\n  candidates: any[] = [];\n  voters: any[] = [];\n  candidateAddr = \"\";\n  voterAddr = \"\";\n  stubAccounts: any = [];\n\n  form: any = {\n    startDate: null,\n    endDate: null,\n  };\n\n  async mounted() {\n    const web3Provider = new Web3.providers.HttpProvider(\n      //\"ws://172.25.0.102:7545\"\n      \"http://192.168.12.146:8545\"\n    );\n\n    if (typeof (window as any).ethereum !== \"undefined\") {\n      console.log(\"MetaMask is installed!\");\n\n      // (window as any).ethereum.request({ method: 'eth_requestAccounts' });\n\n      // this.web3Instance = new Web3((window as any).ethereum);\n      this.web3Instance = new Web3(web3Provider);\n\n      console.log(\"web3Instance\", this.web3Instance);\n\n      const fetchedAccounts = await this.web3Instance.eth.getAccounts();\n\n      console.log(\"fetchedAccounts\", fetchedAccounts);\n\n      this.currentAddress = fetchedAccounts[0];\n\n      this.electionContract = new this.web3Instance.eth.Contract(\n        ElectionContract.abi as any\n        // ElectionContract.networks['5777'].address\n      ) as any;\n\n      console.log(\"electionContract\", this.electionContract);\n    } else {\n      console.log(\"MetaMask is not installed\");\n    }\n  }\n\n  beforeDestroy() {\n    if (this.web3Instance) {\n      this.web3Instance = null;\n    }\n\n    if (this.electionContract) {\n      this.electionContract = null;\n    }\n  }\n\n  async generateStubAccounts() {\n    for (const i of new Array(6)) {\n      const password = (Math.random() + 1).toString(36).substring(7);\n\n      const address = await this.web3Instance!.eth.personal.newAccount(\n        password\n      );\n      this.unlockAccount(address, password);\n      this.stubAccounts.push({\n        address,\n        password,\n      });\n    }\n\n    console.log(\"stubAccounts\", this.stubAccounts);\n  }\n\n  async unlockAccount(address: string, password: string) {\n    // unlock for a long time\n    this.web3Instance!.eth.personal.unlockAccount(address, password, 15000);\n  }\n\n  async deploy() {\n    // const contractByteCode = await this.web3Instance!.eth.getCode(\n    //   ElectionContract.networks['5777'].address\n    // );\n    const contractByteCode = ElectionContract.bytecode;\n\n    // const candidates: string[] = this.stubAccounts\n    //   .filter((account: any) => !account.address !== this.currentAddress)\n    //   // .slice(0, 10)\n    //   .map((account: any) => account.address);\n    // const voters: string[] = this.stubAccounts\n    //   .filter((account: any) => !account.address !== this.currentAddress)\n    //   .map((account: any) => account.address)\n    //   .filter((addr: string) => !candidates.includes(addr));\n\n    const candidates = this.candidates;\n    const voters = this.voters;\n\n    const startDate = Math.trunc(this.form.startDate.getTime() / 1000);\n    const endDate = Math.trunc(this.form.endDate.getTime() / 1000);\n\n    console.log(\"startDate\", startDate);\n    console.log(\"endDate\", endDate);\n\n    this.deployedElectionContract = await this.electionContract\n      .deploy({\n        data: contractByteCode,\n        arguments: [candidates, voters, startDate, endDate],\n      })\n      .send({\n        from: this.currentAddress,\n        gas: 2120541,\n        gasPrice: \"2000000000\",\n      });\n\n    console.log(\"deployedElectionContract\", this.deployedElectionContract);\n  }\n\n  addCandidate() {\n    if (this.candidateAddr.trim()) {\n      this.candidates.push(this.candidateAddr.trim());\n\n      this.candidateAddr = \"\";\n    }\n  }\n\n  addVoter() {\n    if (this.voterAddr.trim()) {\n      this.voters.push(this.voterAddr.trim());\n\n      this.voterAddr = \"\";\n    }\n  }\n}\n"],"sourceRoot":""}]}